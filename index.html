<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HIGH PAYING TRANSLATOR</title>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/lipis/flag-icons@7.2.3/css/flag-icons.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&family=Noto+Naskh+Arabic:wght@400..700&family=Noto+Sans+JP:wght@100..900&family=Open+Sans:ital,wght@0,300..800;1,300..800&family=PT+Mono&display=swap"
        rel="stylesheet">
    <style>
        body {
            font-family: "Open Sans", sans-serif;
            margin: 0;
            padding: 0;
            background-color: #2c2c2c;
            color: white;
            font-size: 14px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        h1 {
            font-family: "Montserrat", sans-serif;
            font-optical-sizing: auto;
            font-style: normal;
            text-align: center;
            font-size: 24px;
        }

        h1 span {
            color: #3498db;
        }

        .tabs {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
        }

        .tab {
            padding: 10px 20px;
            background-color: #424242;
            cursor: pointer;
            border: none;
            color: white;
            flex: 1;
            max-width: 200px;
            border-radius: 5px;
        }

        .tab.active {
            background-color: #3498db;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .input-container {
            position: relative;
            margin-bottom: 10px;
        }

        textarea {
            width: 100%;
            height: 150px;
            background-color: #424242;
            color: white;
            border: 1px solid #555;
            padding: 10px;
            box-sizing: border-box;
            font-family: "Open Sans", sans-serif;
            font-size: 14px;
            font-style: normal;
            border-radius: 5px;
            white-space: pre-wrap;
        }

        textarea::placeholder {
            font-style: italic;
        }

        .button-container {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        button {
            padding: 10px 20px;
            color: white;
            border: none;
            cursor: pointer;
            margin: 5px;
            font-family: "Open Sans", sans-serif;
            font-size: 14px;
            min-width: 100px;
            /* Reduced from 80px */
            max-width: 120px;
            /* Added to limit maximum width */
            border-radius: 5px;
        }

        button.translate {
            background-color: #1f8b4c;
        }

        button.translate:hover {
            background-color: #176839;
        }

        button.reset {
            background-color: #e74c3c;
        }

        button.reset:hover {
            background-color: #c0392b;
        }

        button.copy {
            background-color: #3498db;
        }

        button.copy:hover {
            background-color: #2980b9;
        }

        .char-count {
            position: absolute;
            right: 10px;
            bottom: 10px;
            background-color: rgba(0, 0, 0, 0.5);
            padding: 2px 5px;
            border-radius: 3px;
        }

        .char-count.over-limit {
            color: #e74c3c;
        }

        .language-section {
            margin-bottom: 20px;
        }

        .language-label {
            margin-bottom: 5px;
            display: flex;
            align-items: center;
        }

        .flag-icon {
            margin-right: 5px;
        }

        textarea.over-limit {
            border-color: #e74c3c;
        }

        .arabic-text {
            font-family: "Noto Naskh Arabic", serif;
            font-optical-sizing: auto;
            font-size: 16px;
            font-style: normal;
        }

        .japanese-text {
            font-family: "Noto Sans JP", sans-serif;
            font-optical-sizing: auto;
            font-size: 14px;
            font-style: normal;
        }

        .developer-credit {
            font-family: "PT Mono", monospace;
            font-weight: 400;
            font-style: normal;
            text-align: center;
            font-size: 12px;
            color: #424242;
            margin-top: 20px;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }

            .tabs {
                flex-direction: row;
            }

            .tab {
                width: 50%;
                text-align: center;
            }

            button {
                width: auto;
                /* Changed from fixed width to auto */
                min-width: 100px;
                max-width: 120px;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <h1 id="mainTitle">HIGH PAYING <span>TRANSLATOR</span></h1>

        <div class="tabs">
            <button class="tab active" onclick="openTab(event, 'translator')">Judul</button>
            <button class="tab" onclick="openTab(event, 'description')">Deskripsi</button>
        </div>

        <div id="translator" class="tab-content active">
            <div class="input-container">
                <textarea id="sourceText" placeholder="Masukkan Judul (Maksimal 100 Karakter)"></textarea>
                <div class="char-count" id="sourceCharCount">0/100</div>
            </div>
            <div class="button-container">
                <button class="translate" onclick="translateText('translator')">Translate</button>
                <button class="reset" onclick="resetAll('translator')">Reset</button>
            </div>
            <div id="translations"></div>
        </div>

        <div id="description" class="tab-content">
            <div class="input-container">
                <textarea id="descriptionText" placeholder="Masukkan Deskripsi (Maksimal 5.000 Karakter)"></textarea>
                <div class="char-count" id="descriptionCharCount">0/5000</div>
            </div>
            <div class="button-container">
                <button class="translate" onclick="translateText('description')">Translate</button>
                <button class="reset" onclick="resetAll('description')">Reset</button>
            </div>
            <div id="descriptionTranslations"></div>
        </div>

        <div class="developer-credit">Developed by Afkar (2024)</div>
    </div>

    <script>
        const languages = [
            { code: 'ar', name: 'Arab', flag: 'sa' },
            { code: 'nl', name: 'Belanda', flag: 'nl' },
            { code: 'en', name: 'Inggris', flag: 'gb' },
            { code: 'id', name: 'Indonesia', flag: 'id' },
            { code: 'it', name: 'Italia', flag: 'it' },
            { code: 'ja', name: 'Jepang', flag: 'jp' },
            { code: 'de', name: 'Jerman', flag: 'de' },
            { code: 'fr', name: 'Prancis', flag: 'fr' },
            { code: 'ru', name: 'Rusia', flag: 'ru' },
            { code: 'es', name: 'Spanyol', flag: 'es' }
        ];

        function openTab(evt, tabName) {
            const tabContents = document.getElementsByClassName("tab-content");
            for (let i = 0; i < tabContents.length; i++) {
                tabContents[i].classList.remove("active");
            }

            const tabs = document.getElementsByClassName("tab");
            for (let i = 0; i < tabs.length; i++) {
                tabs[i].classList.remove("active");
            }

            document.getElementById(tabName).classList.add("active");
            evt.currentTarget.classList.add("active");
        }

        function updateCharCount(textarea, limit) {
            const charCount = textarea.value.length;
            const charCountElement = textarea.nextElementSibling;
            charCountElement.textContent = `${charCount}/${limit}`;

            if (charCount > limit) {
                textarea.classList.add('over-limit');
                charCountElement.classList.add('over-limit');
            } else {
                textarea.classList.remove('over-limit');
                charCountElement.classList.remove('over-limit');
            }
        }


        function createLanguageSection(language, containerID, charLimit) {
            const section = document.createElement('div');
            section.className = 'language-section';

            const label = document.createElement('div');
            label.className = 'language-label';

            const flagSpan = document.createElement('span');
            flagSpan.className = `fi fi-${language.flag}`;
            flagSpan.style.marginRight = '5px';

            label.appendChild(flagSpan);
            label.appendChild(document.createTextNode(language.name));
            section.appendChild(label);

            const inputContainer = document.createElement('div');
            inputContainer.className = 'input-container';

            const textarea = document.createElement('textarea');
            textarea.id = `${containerID}_translation_${language.code}`;
            textarea.readOnly = true;
            textarea.style.whiteSpace = 'pre-wrap';
            if (language.code === 'ar') {
                textarea.classList.add('arabic-text');
            } else if (language.code === 'ja') {
                textarea.classList.add('japanese-text');
            }
            textarea.oninput = () => updateCharCount(textarea, charLimit);
            textarea.onclick = () => copyToClipboard(textarea.id, copyButton); // Add click event to copy
            inputContainer.appendChild(textarea);

            const charCount = document.createElement('div');
            charCount.className = 'char-count';
            charCount.textContent = `0/${charLimit}`;
            inputContainer.appendChild(charCount);

            section.appendChild(inputContainer);

            const copyButton = document.createElement('button');
            copyButton.textContent = 'Copy';
            copyButton.className = 'copy';
            copyButton.onclick = () => copyToClipboard(textarea.id, copyButton);
            section.appendChild(copyButton);

            return section;
        }

        function initializeTranslationSections() {
            const translationsContainer = document.getElementById('translations');
            const descriptionTranslationsContainer = document.getElementById('descriptionTranslations');
            languages.forEach(lang => {
                translationsContainer.appendChild(createLanguageSection(lang, 'translator', 100));
                descriptionTranslationsContainer.appendChild(createLanguageSection(lang, 'description', 5000));
            });

            document.getElementById('sourceText').addEventListener('input', function () {
                updateCharCount(this, 100);
            });
            document.getElementById('descriptionText').addEventListener('input', function () {
                updateCharCount(this, 5000);
            });
        }

        async function translateText(tabName) {
            const sourceText = document.getElementById(tabName === 'translator' ? 'sourceText' : 'descriptionText').value;
            if (!sourceText) return;

            const containerID = tabName;
            const maxChars = tabName === 'translator' ? 100 : 5000;

            for (const lang of languages) {
                try {
                    const translatedText = await googleTranslate(sourceText, lang.code);
                    const translationTextarea = document.getElementById(`${containerID}_translation_${lang.code}`);
                    translationTextarea.value = translatedText;
                    updateCharCount(translationTextarea, maxChars);
                } catch (error) {
                    console.error(`Translation error for ${lang.name}:`, error);
                }
            }
        }

        async function googleTranslate(text, targetLang) {
            const sourceLang = 'auto';
            const chunks = splitTextIntoChunks(text, 5000);
            let translatedChunks = [];

            for (const chunk of chunks) {
                const url = `https://translate.googleapis.com/translate_a/single?client=gtx&sl=${sourceLang}&tl=${targetLang}&dt=t&q=${encodeURIComponent(chunk)}`;

                try {
                    const response = await axios.get(url);
                    const translatedChunk = response.data[0].map(sentence => sentence[0]).join('');
                    translatedChunks.push(translatedChunk);
                } catch (error) {
                    console.error('Translation error:', error);
                    translatedChunks.push('Translation error');
                }
            }

            return translatedChunks.join('');
        }

        function splitTextIntoChunks(text, maxChunkSize) {
            const chunks = [];
            let index = 0;
            while (index < text.length) {
                chunks.push(text.substr(index, maxChunkSize));
                index += maxChunkSize;
            }
            return chunks;
        }

        function resetAll(tabName) {
            const textareaId = tabName === 'translator' ? 'sourceText' : 'descriptionText';
            const maxChars = tabName === 'translator' ? 100 : 5000;
            document.getElementById(textareaId).value = '';
            updateCharCount(document.getElementById(textareaId), maxChars);

            languages.forEach(lang => {
                const translationTextarea = document.getElementById(`${tabName}_translation_${lang.code}`);
                translationTextarea.value = '';
                updateCharCount(translationTextarea, maxChars);
            });
        }

        function copyToClipboard(elementId, button) {
            const element = document.getElementById(elementId);
            element.select();
            document.execCommand('copy');
            updateCopyButton(button);
        }

        function updateCopyButton(button) {
            button.textContent = 'Copied!';
            setTimeout(() => {
                button.textContent = 'Copy';
            }, 1000);
        }

        initializeTranslationSections();
    </script>
</body>
</html>
