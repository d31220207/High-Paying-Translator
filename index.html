<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HPK Translator (Google)</title>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #2c2c2c;
            color: white;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        h1 {
            text-align: center;
        }
        .tabs {
            display: flex;
            margin-bottom: 20px;
        }
        .tab {
            padding: 10px 20px;
            background-color: #424242;
            cursor: pointer;
            border: none;
            color: white;
        }
        .tab.active {
            background-color: #1f8b4c;
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        textarea {
            width: 100%;
            height: 150px;
            margin-bottom: 10px;
            background-color: #424242;
            color: white;
            border: 1px solid #555;
            padding: 10px;
            box-sizing: border-box;
        }
        button {
            padding: 10px 20px;
            background-color: #1f8b4c;
            color: white;
            border: none;
            cursor: pointer;
            margin-right: 10px;
        }
        button:hover {
            background-color: #176839;
        }
        .char-count {
            margin-bottom: 10px;
        }
        .char-count.over-limit {
            color: #e74c3c;
        }
        .language-section {
            margin-bottom: 20px;
        }
        .language-label {
            font-weight: bold;
            margin-bottom: 5px;
        }
        textarea.over-limit {
            border-color: #e74c3c;
        }
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            .tabs {
                flex-direction: column;
            }
            .tab {
                width: 100%;
                text-align: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 id="mainTitle">HPK Translator (Google)</h1>
        
        <div class="tabs">
            <button class="tab active" onclick="openTab(event, 'translator')">Translator</button>
            <button class="tab" onclick="openTab(event, 'description')">Description</button>
        </div>

        <div id="translator" class="tab-content active">
            <textarea id="sourceText" placeholder="Enter text to translate (max 100 characters)" oninput="updateCharCount(this, 100); translateTitle();"></textarea>
            <div class="char-count" id="sourceCharCount">0/100</div>
            <button onclick="translateText('translator')">Translate</button>
            <button onclick="resetAll('translator')">Reset</button>

            <div id="translations"></div>
        </div>

        <div id="description" class="tab-content">
            <textarea id="descriptionText" placeholder="Enter description (max 5000 characters)" oninput="updateCharCount(this, 5000)"></textarea>
            <div class="char-count" id="descriptionCharCount">0/5000</div>
            <button onclick="translateText('description')">Translate</button>
            <button onclick="resetAll('description')">Reset</button>

            <div id="descriptionTranslations"></div>
        </div>
    </div>

    <script>
        const languages = [
            {code: 'ar', name: 'Arab'},
            {code: 'nl', name: 'Belanda'},
            {code: 'en', name: 'Inggris'},
            {code: 'id', name: 'Indonesia'},
            {code: 'it', name: 'Italia'},
            {code: 'ja', name: 'Jepang'},
            {code: 'de', name: 'Jerman'},
            {code: 'fr', name: 'Prancis'},
            {code: 'ru', name: 'Rusia'},
            {code: 'es', name: 'Spanyol'}
        ];

        function openTab(evt, tabName) {
            const tabContents = document.getElementsByClassName("tab-content");
            for (let i = 0; i < tabContents.length; i++) {
                tabContents[i].classList.remove("active");
            }

            const tabs = document.getElementsByClassName("tab");
            for (let i = 0; i < tabs.length; i++) {
                tabs[i].classList.remove("active");
            }

            document.getElementById(tabName).classList.add("active");
            evt.currentTarget.classList.add("active");
        }

        function updateCharCount(textarea, limit) {
            const charCount = textarea.value.length;
            const charCountElement = document.getElementById(textarea.id + 'CharCount');
            charCountElement.textContent = `${charCount}/${limit}`;

            if (charCount > limit) {
                textarea.classList.add('over-limit');
                charCountElement.classList.add('over-limit');
                textarea.value = textarea.value.slice(0, limit);
            } else {
                textarea.classList.remove('over-limit');
                charCountElement.classList.remove('over-limit');
            }
        }

        function createLanguageSection(language, containerID, charLimit) {
            const section = document.createElement('div');
            section.className = 'language-section';

            const label = document.createElement('div');
            label.className = 'language-label';
            label.textContent = language.name;
            section.appendChild(label);

            const textarea = document.createElement('textarea');
            textarea.id = `${containerID}_translation_${language.code}`;
            textarea.readOnly = true;
            section.appendChild(textarea);

            const charCount = document.createElement('div');
            charCount.className = 'char-count';
            charCount.id = `${containerID}_translation_${language.code}CharCount`;
            charCount.textContent = `0/${charLimit}`;
            section.appendChild(charCount);

            const copyButton = document.createElement('button');
            copyButton.textContent = 'Copy';
            copyButton.onclick = () => copyToClipboard(textarea.id);
            section.appendChild(copyButton);

            return section;
        }

        function initializeTranslationSections() {
            const translationsContainer = document.getElementById('translations');
            const descriptionTranslationsContainer = document.getElementById('descriptionTranslations');
            languages.forEach(lang => {
                translationsContainer.appendChild(createLanguageSection(lang, 'translator', 100));
                descriptionTranslationsContainer.appendChild(createLanguageSection(lang, 'description', 5000));
            });
        }

        async function translateText(tabName) {
            const sourceText = document.getElementById(tabName === 'translator' ? 'sourceText' : 'descriptionText').value;
            if (!sourceText) return;

            const containerID = tabName;
            const maxChars = tabName === 'translator' ? 100 : 5000;

            for (const lang of languages) {
                try {
                    const translatedText = await googleTranslate(sourceText, lang.code);
                    const translationTextarea = document.getElementById(`${containerID}_translation_${lang.code}`);
                    translationTextarea.value = translatedText;
                    updateCharCount(translationTextarea, maxChars);
                } catch (error) {
                    console.error(`Translation error for ${lang.name}:`, error);
                }
            }
        }

        async function translateTitle() {
            const sourceText = document.getElementById('sourceText').value;
            if (!sourceText) return;

            try {
                const translatedTitle = await googleTranslate(sourceText, 'en');
                document.getElementById('mainTitle').textContent = translatedTitle;
            } catch (error) {
                console.error('Title translation error:', error);
            }
        }

        async function googleTranslate(text, targetLang) {
            const sourceLang = 'auto';
            const url = `https://translate.googleapis.com/translate_a/single?client=gtx&sl=${sourceLang}&tl=${targetLang}&dt=t&q=${encodeURIComponent(text)}`;
            
            try {
                const response = await axios.get(url);
                return response.data[0][0][0];
            } catch (error) {
                console.error('Translation error:', error);
                return 'Translation error';
            }
        }

        function resetAll(tabName) {
            const textareaId = tabName === 'translator' ? 'sourceText' : 'descriptionText';
            const maxChars = tabName === 'translator' ? 100 : 5000;
            document.getElementById(textareaId).value = '';
            updateCharCount(document.getElementById(textareaId), maxChars);
            
            languages.forEach(lang => {
                const translationTextarea = document.getElementById(`${tabName}_translation_${lang.code}`);
                translationTextarea.value = '';
                updateCharCount(translationTextarea, maxChars);
            });

            if (tabName === 'translator') {
                document.getElementById('mainTitle').textContent = 'HPK Translator (Google)';
            }
        }

        function copyToClipboard(elementId) {
            const element = document.getElementById(elementId);
            element.select();
            document.execCommand('copy');
            alert('Copied to clipboard!');
        }

        initializeTranslationSections();
    </script>
</body>
</html>
